/* ================================================
 *  = easyUtil.loginUi for Vue component  =
 *  = v1.0 =
 *  = (c) Copyright 2018 qiyan. All Rights Reserved.  =
 ================================================ */  
"use strict";Vue.component("easyLogin",{template:'<div id="easyUtil-login-part" class="easyUtil-login-body" @keyup.13="toSubmit()">\n\t\t\t\t<div class="easyUtil-login-title">{{title}}</div>\n\t\t\t\t<hr/>\n\t\t\t\t<div class="easyUtil-login-content">\n\t\t\t\t<span class="easyUtil-login-word" v-if="word">用户名:</span>\n\t\t\t\t\t<span v-if="icon" class="easyUtil-login-icon"><i :class="icons.user"></i></span>\n\t\t\t\t\t<input ref="user" type="text" v-model="values.user" @blur="checkVal(\'user\')" @focus="inputState(\'user\')" @keyup="forget()" :placeholder="placeholders.user" />\n\t\t\t\t\t<span v-show="deletes.user" @click="toDelete(\'user\')" class="easyUtil-login-delete">×</span>\n\t\t\t\t\t<div v-show="errorFlag.user" class="easyUtil-login-errorCode">{{errorInfo.user}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="easyUtil-login-content">\n\t\t\t\t<span class="easyUtil-login-word" v-if="word">密码:</span>\n\t\t\t\t\t<span v-if="icon" class="easyUtil-login-icon"><i :class="icons.pwd"></i></span>\n\t\t\t\t\t<input ref="pwd" type="password" v-model="values.pwd" @blur="checkVal(\'pwd\')" @focus="inputState(\'pwd\')" :placeholder="placeholders.pwd" />\n\t\t\t\t\t<span v-show="deletes.pwd" @click="toDelete(\'pwd\')" class="easyUtil-login-delete">×</span>\n\t\t\t\t\t<div v-show="errorFlag.pwd" class="easyUtil-login-errorCode">{{errorInfo.pwd}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if="hasCode" class="easyUtil-login-content">\n\t\t\t\t<span v-if="word" class="easyUtil-login-word">验证码:</span>\n\t\t\t\t\t<span v-if="icon" class="easyUtil-login-icon"><i :class="icons.code"></i></span>\n\t\t\t\t\t<input ref="code" type="text" v-model="code" @keyup="check()" @blur="checkVal(\'code\')" @focus="inputState(\'code\')" :placeholder="placeholders.code" />\n\t\t\t\t\t<span v-show="deletes.code" @click="toDelete(\'code\')" class="easyUtil-login-delete">×</span>\n\t\t\t\t\t<div v-show="errorFlag.code" class="easyUtil-login-errorCode">{{errorInfo.code}}</div>\n\t\t\t\t\t<img id="easyUtil-login-codeImg" :src="imgPath" class="easyUtil-login-codeImg" @click="getImg()" :title="imgTitle"/>\n\t\t\t\t</div>\n\t\t\t\t<div class="easyUtil-login-remember">\n\t\t\t\t\t<label for="easyUtil-login-remember-input" class="easyUtil-login-label">\n\t\t\t\t\t\t<input id="easyUtil-login-remember-input" type="checkbox" v-model="checked" />\n\t\t\t\t\t\t<span>{{remember}}</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t\t<button type="button" :disabled="disabled" :class="{\'easyUtil-login-btn\':true,\'easyUtil-login-btn-abled\':!disabled}" @click="toSubmit()" class="">{{btnText}}</button>\n\t\t\t</div>',props:{title:{type:String,default:"用户登录"},word:{type:Boolean,default:!0},icon:{type:Boolean,default:!1},imgTitle:{type:String,default:"换一张图片"},imgPath:{type:String,default:""},placeholders:{type:Object,default:function(){return{user:"请输入用户名",pwd:"请输入密码",code:"请输入验证码"}}},icons:{type:Object,default:function(){return{user:"iconFont icon-user",pwd:"iconFont icon-pwd",code:"iconFont icon-code"}}},btnText:{type:String,default:"登录"},hasCode:{type:Boolean,default:!0},codeFlag:{type:Boolean,default:!1},remember:{type:String,default:"记住用户名"},errorInfo:{type:Object,default:function(){return{user:"用户名不能为空",pwd:"密码不能为空",code:"验证码不能为空"}}}},created:function(){this.values.user=this.getCookie(),this.values.user&&(this.checked=!0)},mounted:function(){var t=this;this.$nextTick(function(){for(var e in t.values)if(e="isCode"!==e?e:"code",!t.values[e]){t.$refs[e].focus(),t.$refs[e].parentNode.className=t.BASIC_CLASS+" "+t.SELECTED_CLASS;break}t.getImg()})},data:function(){return{codeEmpty:this.errorInfo.code,values:{user:"",pwd:"",isCode:!1},deletes:{user:!1,pwd:!1,code:!1},errorFlag:{user:!1,pwd:!1,code:!1},code:"",disabled:!0,checked:!1,BASIC_CLASS:"easyUtil-login-content",SELECTED_CLASS:"easyUtil-login-selected",ERROR_CLASS:"easyUtil-login-error"}},watch:{values:{handler:function(){this.hasCode&&this.values.user&&this.values.pwd&&this.values.isCode?this.disabled=!1:this.values.user&&this.values.pwd&&!this.hasCode?this.disabled=!1:this.disabled=!0,this.values.user?this.deletes.user=!0:this.deletes.user=!1,this.values.pwd?this.deletes.pwd=!0:this.deletes.pwd=!1},deep:!0},codeFlag:function(){this.__codeCheckStyle()},code:{handler:function(){this.code?(this.deletes.code=!0,this.__codeCheckStyle()):(this.values.isCode=!1,this.deletes.code=!1)},immediate:!0},checked:{handler:function(){this.handlerCookie(this.checked)}}},methods:{checkVal:function(t){("code"!==t?this.values[t]:this.code)?this.$refs[t].parentNode.className=this.BASIC_CLASS:(this.errorFlag[t]=!0,this.errorInfo.code=this.codeEmpty,this.$refs[t].parentNode.className=this.BASIC_CLASS+" "+this.ERROR_CLASS)},forget:function(){this.checked=!1},inputState:function(t){this.errorFlag[t]&&(this.errorFlag[t]=!1),this.$refs[t].parentNode.className=this.BASIC_CLASS+" "+this.SELECTED_CLASS},toDelete:function(t){"code"!==t?this.values[t]="":this.code="",this.$refs[t].focus(),this.inputState(t),"user"===t&&(this.checked=!1)},handlerCookie:function(t){t?Cookie.setCookie("loginName",this.values.user):Cookie.delCookie("loginName")},getCookie:function(){return Cookie.getCookie("loginName")},getImg:function(){this.$emit("get-img")},check:function(){this.$emit("check-code",this.code)},__codeCheckStyle:function(){this.codeFlag?(this.values.isCode=!0,this.errorFlag.code=!1,this.$refs.code.parentNode.className=this.BASIC_CLASS+" "+this.SELECTED_CLASS):(this.values.isCode=!1,this.errorFlag.code=!0,this.errorInfo.code="验证码不正确",this.$refs.code.parentNode.className=this.BASIC_CLASS+" "+this.ERROR_CLASS)},toSubmit:function(){if(!this.disabled){var t={user:this.values.user,pwd:this.values.pwd};this.$emit("submit",t)}}}}),function(){var t={setCookie:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,i=new Date;i.setDate(i.getDate()+s),document.cookie=t+"="+encodeURIComponent(e)+";expires="+i.toGMTString()+";path=/"},getCookie:function(t){var e=RegExp("(?:^| )"+t+"=([^;]+)(?:;|$)"),s=document.cookie.match(e);return s?decodeURIComponent(s[1]):null},delCookie:function(t){var e=new Date;e.setDate(e.getDate()-1),document.cookie=t+"="+encodeURIComponent(this.getCookie(t))+";expires="+e.toGMTString()+";path=/"}};window.Cookie=t}();